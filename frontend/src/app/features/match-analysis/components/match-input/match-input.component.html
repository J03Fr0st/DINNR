<div class="match-input-container">
  <div class="match-form">
    <div class="form-section">
      <h3>
        <i class="fas fa-search"></i>
        Quick Player Analysis
      </h3>
      <p class="form-description">Enter a player name and select their region to get comprehensive performance insights</p>
    </div>

    <form [formGroup]="playerForm" (ngSubmit)="onSubmit()">
      <div class="form-field">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Player Name</mat-label>
          <input matInput formControlName="playerName" placeholder="Enter PUBG player name">
          <i class="fas fa-user mat-suffix" matSuffix></i>
          <mat-error *ngIf="playerForm.get('playerName')?.hasError('required')">
            Player name is required
          </mat-error>
          <mat-error *ngIf="playerForm.get('playerName')?.hasError('minlength')">
            Player name must be at least 2 characters
          </mat-error>
          <mat-hint>Enter the exact in-game player name</mat-hint>
        </mat-form-field>
      </div>

      <div class="form-field">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Region/Shard</mat-label>
          <i class="fas fa-globe mat-prefix" matPrefix></i>
          <mat-select formControlName="shard">
            <mat-option *ngFor="let shard of shards" [value]="shard.value">
              {{ shard.label }}
            </mat-option>
          </mat-select>
          <mat-hint>Select the player's gaming region</mat-hint>
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button mat-raised-button type="submit" class="analyze-btn" [disabled]="playerForm.invalid || loading">
          <i class="fas fa-chart-line"></i>
          Analyze Player
        </button>

        <button mat-raised-button type="button" class="clear-btn" (click)="resetForm()" [disabled]="loading">
          <i class="fas fa-redo"></i>
          Clear
        </button>

        <button mat-raised-button type="button" class="export-btn" (click)="exportAnalysis()"
                [disabled]="!analysis || loading">
          <i class="fas fa-download"></i>
          Export Results
        </button>
      </div>
    </form>

    <div *ngIf="loading" class="loading-container">
      <mat-progress-spinner mode="indeterminate" diameter="60" strokeWidth="4"></mat-progress-spinner>
      <div class="loading-text">Analyzing player performance...</div>
      <div class="loading-subtitle">This may take a few moments</div>
    </div>
  </div>

  <div *ngIf="analysis" class="analysis-results fade-in">
    <div class="results-header">
      <h2>Player Analysis Results</h2>
      <div class="match-info">
        <strong>{{ analysis.playerName || 'Unknown' }}</strong> â€¢ {{ analysis.shard || 'Unknown' }}
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">{{ analysis.stats.kills || 0 }}</div>
        <div class="stat-label">Total Kills</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ analysis.stats.wins || 0 }}</div>
        <div class="stat-label">Wins</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ (analysis.stats.kdRatio || 0).toFixed(2) }}</div>
        <div class="stat-label">K/D Ratio</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ (analysis.stats.damagePerMatch || 0).toFixed(0) }}</div>
        <div class="stat-label">Avg Damage</div>
      </div>
    </div>

    <div class="insights-section">
      <h3>
        <i class="fas fa-brain"></i>
        Performance Insights
      </h3>
      <ul class="insights-list">
        <li *ngFor="let insight of analysis.insights">
          <div class="insight-type">{{ insight.type }}</div>
          <div class="insight-text">{{ insight.description }}</div>
        </li>
      </ul>
    </div>

    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-col">
          <div class="chart-title">
            <i class="fas fa-chart-line"></i>
            Performance Trends
          </div>
          <div class="chart-placeholder">
            <i class="fas fa-chart-bar"></i>
            <p>Performance charts will be displayed here</p>
          </div>
        </div>
        <div class="chart-col">
          <div class="chart-title">
            <i class="fas fa-history"></i>
            Match History
          </div>
          <div class="chart-placeholder">
            <i class="fas fa-timeline"></i>
            <p>Match timeline will be displayed here</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
