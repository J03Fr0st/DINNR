<div class="insights-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Match Insights</mat-card-title>
      <mat-card-subtitle>AI-powered analysis and recommendations</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content *ngIf="insights">
      <div class="overall-quality">
        <h3>Overall Match Quality</h3>
        <div class="quality-meter">
          <div class="quality-bar">
            <div class="quality-fill" [ngClass]="getOverallQualityColor(insights.overallMatchQuality)"
                 [style.width.%]="insights.overallMatchQuality * 20">
            </div>
          </div>
          <div class="quality-text">{{ getOverallQualityText(insights.overallMatchQuality) }}</div>
        </div>
      </div>

      <div class="team-performance">
        <h3>Team Performance</h3>
        <div class="performance-grid">
          <div class="performance-item">
            <div class="performance-label">Coordination</div>
            <div class="performance-bar">
              <div class="performance-fill" [ngClass]="getTeamPerformanceColor(insights.teamPerformance.coordination)"
                   [style.width.%]="insights.teamPerformance.coordination * 20">
              </div>
            </div>
            <div class="performance-value">{{ insights.teamPerformance.coordination }}/5</div>
          </div>

          <div class="performance-item">
            <div class="performance-label">Communication</div>
            <div class="performance-bar">
              <div class="performance-fill" [ngClass]="getTeamPerformanceColor(insights.teamPerformance.communication)"
                   [style.width.%]="insights.teamPerformance.communication * 20">
              </div>
            </div>
            <div class="performance-value">{{ insights.teamPerformance.communication }}/5</div>
          </div>

          <div class="performance-item">
            <div class="performance-label">Strategy</div>
            <div class="performance-bar">
              <div class="performance-fill" [ngClass]="getTeamPerformanceColor(insights.teamPerformance.strategy)"
                   [style.width.%]="insights.teamPerformance.strategy * 20">
              </div>
            </div>
            <div class="performance-value">{{ insights.teamPerformance.strategy }}/5</div>
          </div>

          <div class="performance-item">
            <div class="performance-label">Overall</div>
            <div class="performance-bar">
              <div class="performance-fill" [ngClass]="getTeamPerformanceColor(insights?.teamPerformance?.overallRating || 0)"
                   [style.width.%]="(insights?.teamPerformance?.overallRating || 0) * 20">
              </div>
            </div>
            <div class="performance-value">{{ insights?.teamPerformance?.overallRating || 0 }}/5</div>
          </div>
        </div>
      </div>

      <div class="key-moments" *ngIf="insights.keyMoments && insights.keyMoments.length > 0">
        <h3>Key Moments</h3>
        <div class="moments-timeline">
          <div *ngFor="let moment of insights.keyMoments" class="moment-item">
            <div class="moment-icon" [ngClass]="getMomentColor(moment.type)">
              <mat-icon>{{ getMomentIcon(moment.type) }}</mat-icon>
            </div>
            <div class="moment-content">
              <div class="moment-time">{{ formatTime(moment.timestamp) }}</div>
              <div class="moment-description">{{ moment.description }}</div>
              <div class="moment-players">
                <mat-chip-list>
                  <mat-chip *ngFor="let player of moment.players" size="small">
                    {{ player }}
                  </mat-chip>
                </mat-chip-list>
              </div>
            </div>
            <div class="moment-impact">
              <div class="impact-meter">
                <div class="impact-fill" [style.width.%]="moment.impact * 20"></div>
              </div>
              <span class="impact-text">Impact: {{ moment.impact }}/5</span>
            </div>
          </div>
        </div>
      </div>

      <div class="strategic-insights" *ngIf="insights.strategicInsights && insights.strategicInsights.length > 0">
        <h3>Strategic Insights</h3>
        <div class="insights-list">
          <div *ngFor="let insight of insights.strategicInsights" class="insight-item">
            <mat-icon class="insight-icon">lightbulb</mat-icon>
            <div class="insight-text">{{ insight }}</div>
          </div>
        </div>
      </div>
    </mat-card-content>

    <mat-card-content *ngIf="!insights">
      <div class="no-data">
        <mat-icon>psychology</mat-icon>
        <p>No insights available</p>
      </div>
    </mat-card-content>
  </mat-card>
</div>
